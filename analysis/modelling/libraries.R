#
# codebeat model builder scripts - a set of scripts to build models used for code smells detection in codebeat
# Copyright (C) 2018-2022 code quest sp. z o.o.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#

libs <- c("formatR",
"lpSolve",
"linprog",
"RcppProgress",
"permute",
"NADA",
"truncnorm",
"zeallot",
"fontBitstreamVera",
"fontLiberation",
"systemfonts",
"lambda.r",
"futile.options",
"profileModel",
"zip",
"showimage",
"ape",
"geometry",
"vegan",
"cubature",
"extrafontdb",
"Rttf2pt1",
"GlobalOptions",
"gdata",
"caTools",
"rngWELL",
"Rook",
"bibtex",
"gbRd",
"polspline",
"SQUAREM",
"dbscan",
"cvTools",
"zCompositions",
"matrixStats",
"praise",
"generics",
"gower",
"timeDate",
"highr",
"xfun",
"labeling",
"munsell",
"tinytex",
"vctrs",
"lifecycle",
"diffobj",
"fontquiver",
"gdtools",
"futile.logger",
"iterators",
"brglm",
"gtools",
"qvcalc",
"ISwR",
"fansi",
"hunspell",
"openxlsx",
"minqa",
"nloptr",
"effects",
"bdsmatrix",
"manipulateWidget",
"mitools",
"DEoptimR",
"itertools",
"bit",
"prettyunits",
"xopen",
"gargle",
"rematch2",
"cyclocomp",
"xmlparsedata",
"highlight",
"parsedate",
"rematch",
"uuid",
"whoami",
"progress",
"reshape",
"debugme",
"webdriver",
"classInt",
"units",
"repr",
"ps",
"measures",
"Deriv",
"sys",
"fastmatch",
"misc3d",
"utf8",
"R.cache",
"base64url",
"FD",
"ade4",
"R2HTML",
"np",
"gamboostLSS",
"stabs",
"mclust",
"flexmix",
"prabclus",
"diptest",
"ggrepel",
"ggsci",
"ggsignif",
"polynom",
"latticeExtra",
"acepack",
"htmlTable",
"extrafont",
"nnls",
"quadprog",
"circlize",
"magic",
"gamm4",
"RLRsim",
"grpreg",
"pbs",
"gplots",
"estimability",
"maptree",
"randtoolbox",
"pbivnorm",
"mnormt",
"DiceDesign",
"sendmailR",
"cellranger",
"downloader",
"influenceR",
"rgexf",
"visNetwork",
"Rdpack",
"flashClust",
"miniUI",
"labelled",
"rms",
"timereg",
"lava",
"bnlearn",
"KernelKnn",
"smotefamily",
"sgeostat",
"robCompositions",
"Formula",
"pmml",
"sandwich",
"strucchange",
"vcd",
"AER",
"mlbench",
"TH.data",
"coin",
"psychotools",
"psychotree",
"RColorBrewer",
"testthat",
"yaml",
"data.table",
"stringdist",
"pipeR",
"Cubist",
"recipes",
"knitr",
"ggplot2",
"gtable",
"rlang",
"scales",
"Cairo",
"forcats",
"gridGraphics",
"magick",
"maps",
"PASWR",
"rmarkdown",
"tidyr",
"vdiffr",
"VennDiagram",
"RWekajars",
"foreach",
"plyr",
"reshape2",
"withr",
"BradleyTerry2",
"fastICA",
"gam",
"ipred",
"ellipse",
"MLmetrics",
"pROC",
"proxy",
"RANN",
"spls",
"subselect",
"pamr",
"superpc",
"R.oo",
"R.methodsS3",
"digest",
"Rcpp",
"tibble",
"hms",
"R6",
"clipr",
"crayon",
"BH",
"stringi",
"spelling",
"carData",
"abind",
"pbkrtest",
"quantreg",
"maptools",
"rio",
"lme4",
"alr4",
"coxme",
"leaps",
"lmtest",
"MatrixModels",
"rgl",
"SparseM",
"survey",
"robustbase",
"pcaPP",
"colorspace",
"sp",
"laeken",
"bartMachineJARs",
"missForest",
"slam",
"bit64",
"plot3Drgl",
"bitops",
"xtable",
"expm",
"assertthat",
"glue",
"magrittr",
"pkgconfig",
"tidyselect",
"plogr",
"callr",
"DBI",
"dbplyr",
"dtplyr",
"Lahman",
"lubridate",
"microbenchmark",
"nycflights13",
"RMySQL",
"RPostgreSQL",
"RSQLite",
"broom",
"purrr",
"cli",
"desc",
"DT",
"ellipsis",
"memoise",
"pkgbuild",
"pkgload",
"rcmdcheck",
"remotes",
"sessioninfo",
"BiocManager",
"evaluate",
"foghorn",
"gmailr",
"lintr",
"mockery",
"pingr",
"pkgdown",
"rhub",
"whisker",
"TeachingDemos",
"mime",
"httpuv",
"jpeg",
"png",
"ini",
"viridisLite",
"base64enc",
"htmltools",
"htmlwidgets",
"hexbin",
"lazyeval",
"crosstalk",
"promises",
"ggthemes",
"GGally",
"shinytest",
"webshot",
"listviewer",
"dendextend",
"sf",
"rgeos",
"IRdisplay",
"processx",
"plotlyGeoAssets",
"modeltools",
"zoo",
"varImp",
"clisymbols",
"rprojroot",
"styler",
"rex",
"brew",
"commonmark",
"glmnetUtils",
"neuralnet",
"pre",
"askpass",
"webutils",
"jose",
"sodium",
"ParamHelpers",
"BBmisc",
"checkmate",
"plot3D",
"mco",
"RJSONIO",
"RcppArmadillo",
"selectr",
"pillar",
"gridExtra",
"pdp",
"RUnit",
"viridis",
"getPass",
"sourcetools",
"later",
"fastmap",
"markdown",
"reactlog",
"shape",
"lars",
"R.rsp",
"igraph",
"backports",
"batchtools",
"brnn",
"bst",
"care",
"clue",
"ClusterR",
"clusterSim",
"clValid",
"cmaes",
"crs",
"DiceKriging",
"emoa",
"FDboost",
"flare",
"fpc",
"frbs",
"FSelector",
"FSelectorRcpp",
"GenSA",
"ggpubr",
"GPfit",
"Hmisc",
"hrbrthemes",
"irace",
"laGP",
"mboost",
"mldr",
"mmpf",
"mRMRe",
"nodeHarvest",
"numDeriv",
"pander",
"penalized",
"PMCMR",
"praznik",
"rappdirs",
"refund",
"rgenoud",
"ROCR",
"rotationForest",
"RRF",
"rsm",
"stepPlr",
"survAUC",
"svglite",
"SwarmSVM",
"tgp",
"wavelets",
"lhs",
"akima",
"cmaesr",
"DiceOptim",
"BatchJobs",
"Rmpi",
"blob",
"DBItest",
"haven",
"modelr",
"readxl",
"reprex",
"feather",
"DiagrammeR",
"Ckmeans.1d.dp",
"float",
"doParallel",
"FactoMineR",
"multcomp",
"fda",
"chemometrics",
"combinat",
"questionr",
"scatterplot3d",
"som",
"deldir",
"pec",
"prodlim",
"imbalance",
"RcppEigen",
"gmp",
"mvoutlier",
"glasso",
"matrixcalc",
"NeuralNetTools",
"entropy",
"corpcor",
"fdrtool",
"crossval",
"rJava",
"mvtnorm",
"partykit",
"randomForest",
"rjson",
"getopt",
"rlist",
"C50",
"cowplot",
"RWeka",
"caret",
"R.utils",
"readr",
"car",
"rrcov",
"VIM",
"bartMachine",
"ada",
"h2o",
"XML",
"e1071",
"DescTools",
"dplyr",
"devtools",
"libcoin",
"earth",
"inum",
"httr",
"gh",
"plotly",
"plotrix",
"party",
"RCurl",
"usethis",
"covr",
"roxygen2",
"rversions",
"plotmo",
"curl",
"openssl",
"smoof",
"rvest",
"ModelMetrics",
"xml2",
"fs",
"gbm",
"git2r",
"shiny",
"glmnet",
"jsonlite",
"kknn",
"mlr",
"mlrMBO",
"parallelMap",
"rpart.plot",
"RPostgres",
"rstudioapi",
"stringr",
"tictoc",
"tidyverse",
"xgboost",
"adabag",
"deepnet",
"DiscriMiner",
"elasticnet",
"evtree",
"extraTrees",
"fda.usc",
"FNN",
"kernlab",
"klaR",
"LiblineaR",
"mda",
"pls",
"ranger",
"rFerns",
"rknn",
"RSNNS",
"sda",
"sparseLDA",
"tuneRanger"
)

# libs <- unique(c(
# "rpart",
#     "rJava",
# "mvtnorm",
# "partykit",
# "randomForest",
# "rjson",
# "etopt",
# "rlist",
# "C50",
# "cowplot",
# "RWeka",
# "caret",
# "R.utils",
# "readr",
# "car",
# "rrcov",
# "VIM",
# "bartMachine",
# "C50",
# "ada",
# "h2o",
# "caret",
# "XML",
# "e1071",
# "DescTools",
# "dplyr",
# "devtools",
# "libcoin",
# "earth",
# "inum",
# "httr",
# "h",
# "plotly",
# "plotrix",
# "party",
# "RCurl",
# "usethis",
# "covr",
# "roxygen2",
# "rversions",
# "plotmo",
# "curl",
# "openssl",
# "smoof",
# "rvest",
# "ModelMetrics",
# "xml2",
# "fs",
# "bm",
# "etopt",
# "it2r",
# "hashmap",
# "shiny",
# "lmnet",
# "jsonlite",
# "kknn",
# "plotmo",
# "mlr",
# "mlrMBO",
# "parallelMap",
# "randomForest",
# "readr",
# "rjson",
# "rpart.plot",
# "rpart.plot",
# "RPostgres",
# "rstudioapi",
# "stringr",
# "tictoc",
# "tidyverse",
# "xgboost",
# "RWeka",
# "adabag", #NAI
# "bartMachine",
# "C50",
# "caret",
# "class", #NAI
# "deepnet", #NAI
# "DescTools",
# "devtools",
# "DiscriMiner", #NAI
# "dplyr",
# "e1071",
# "earth",
# "elasticnet", #NAI
# "evtree", #NAI
# "extraTrees", #NAI
# "fda.usc", #NAI
# "FNN", #NAI
# "fs",
# "bm",
# "etopt",
# "it2r",
# "lmnet",
# "h2o",
# "httr",
# "jsonlite",
# "kernlab", #NAI
# "kknn",
# "klaR", #NAI
# "LiblineaR", #NAI
# "liquidSVM",
# "MASS", #NAI
# "mda", #NAI
# "mlr", #install_version("mlr", version = "2.14.0", repos = "http://cran.us.r-project.org")
# "mlrMBO",
# "nnet", #NAI
# "parallel",
# "parallelMap",
# "party",
# "pls", #NAI
# "randomForest",
# "randomForestSRC",
# "ranger", #NAI
# "readr",
# "rFerns", #NAI
# "rjson",
# "rknn", #NAI
# "rpart",
# "rpart.plot",
# "RPostgres",
# "rrlda", #NAI
# "RSNNS", #NAI
# "RWeka", #NAI
# "rstudioapi",
# "sda", #NAI
# "sparseLDA", #NAI
# "stringr",
# "tictoc",
# "tidyverse",
# "tuneRanger",
# "xgboost"
# ))

new.packages <- libs[!(libs %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages, type="source", dependencies = TRUE)

for(l in new.packages) {

    AP <- available.packages()
    if(!(l %in% AP[,1])) {
        print(paste("Failed to install", l))
        quit(status = 1, save= 'no')
    }

    if ( ! library(l, character.only=TRUE, logical.return=TRUE) ) {
        quit(status = 2, save='no')
    }
}

devtools::install_github("ja-thomas/autoxgboost")
devtools::install_github("berndbischl/ParamHelpers") # version >= 1.11 needed.
devtools::install_github("jakob-r/mlrHyperopt", dependencies = TRUE)

wekalibs <- c("multiBoostAB", "lazyBayesianRules")
library(RWeka)
WPM("refresh-cache")
for(l in wekalibs) {
    WPM("install-package", l)
}

